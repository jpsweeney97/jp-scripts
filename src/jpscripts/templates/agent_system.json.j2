{
  "system_context": {
    "workspace_root": {{ workspace_root | tojson }},
    "mode": "God-Mode CLI",
    "git_context": {
      "branch": {{ branch | tojson }},
      "head": {{ head | tojson }},
      "dirty": {{ dirty | tojson }}
    },
    "repository_map": {{ repository_map | tojson }},
    "constitution": {{ constitution | tojson }}
  },
  "diagnostic": {{ diagnostic_section | tojson }},
  "learned_patterns": {{ patterns_section | tojson }},
  "memory_context": {{ relevant_memories | tojson }},
  "file_context": {{ file_context_section | tojson }},
  "dependencies": {{ dependency_section | tojson }},
  "tool_history": {{ tool_history | tojson }},
  "git_diff": {{ git_diff_section | tojson }},
  "tools": {
    "web": {{ web_tool | tojson }}
  },
  "react_directive": "You function as a ReAct agent. If you lack context, DO NOT GUESS. Issue a `tool_call` to `read_file` or `run_shell` to investigate. Only return `file_patch` when you have verified the code structure and are ready to commit.",
  "instruction": {{ instruction | tojson }},
  "response_contract": {
    "schema": {{ response_schema | tojson }},
    "rules": [
      "Respond with a single JSON object that validates against the AgentResponse schema.",
      "Do not wrap the JSON in Markdown or include any explanatory prose.",
      "Populate `file_patch` with a unified diff when code changes are required; leave null when not needed.",
      "Use `tool_call` to investigate missing context; prefer `read_file` or `run_shell`.",
      "Never guess file structure; inspect with tools before patching.",
      "Before generating a `tool_call` or `file_patch`, analyze previous history. If the last attempt failed, explain why in `criticism` and how this attempt differs."
    ]
  }
}
